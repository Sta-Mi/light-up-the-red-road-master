{"version":3,"file":"pages/know/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://mbti-test-mini/./src/pages/know/index.tsx?ec96","webpack://mbti-test-mini/._src_pages_know_index.tsx"],"sourcesContent":["import _slicedToArray from \"E:/dianlianghongtu/dianlianghongtu/hongtu-test-mini/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport Taro from \"@tarojs/taro\";\nimport { useEffect, useState } from \"react\";\nimport { Image, View } from \"@tarojs/components\";\nimport huiZhang from \"../../assets/huizhang.png\";\nimport onSelectHuiZhang from \"../../assets/on-select-huizhang.jpg\";\nimport exhibitionKnowDara from \"../../data/exhibition_know_data.json\";\nimport GlobalFooter from \"../../components/GlobalFooter\";\nimport \"./index.scss\";\nimport GlobalMenu from \"../../components/GlobalMenu\";\n\n/**\n * 展馆闯关\n */\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default (function () {\n  //获取数据（调用api）\n  var maxKnowListLength = exhibitionKnowDara.length;\n  var exhibitionKnowData = exhibitionKnowDara;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectKey = _useState2[0],\n    setSelectKey = _useState2[1];\n  //const [isComplete, setIsComplete] = useState(false);\n  var keyFromStore = Taro.getStorageSync(\"selectKey\"); //从knowResult页面中获取到selectKey\n\n  useEffect(function () {\n    //本页面的selectKey值\n    if (keyFromStore) {\n      setSelectKey(keyFromStore);\n    } else {\n      keyFromStore = 0;\n    }\n  }, []);\n  var handleClick = function handleClick(key) {\n    /*假设key=0，selectKey = 0\n    * 1. 当knowResultScore>=60表示闯关成功，接受到knowResult的参数keyFromStore===1\n    *   则key 0 2 3不能点击(无法跳转，点击0提示已经闯关成功，点击1跳转，点击23提示完成前置闯关),\n    * 2. 当knowResultScore<60时，接收到的knowResult的参数为仍为keyFromStore===0\n    *   表示闯关失败，则key 1 2 3 不能点击(点击0跳转，点击1提示完成前置闯关，点击23提示完成前置闯关)，\n    *\n    * */\n    if (key === keyFromStore) {\n      setSelectKey(key);\n      Taro.setStorageSync(\"selectKey\", key); //往doKnow页面传递，用于knowResult接受selectKey\n      Taro.navigateTo({\n        url: \"/pages/doKnow/index\"\n      });\n    } else if (key > keyFromStore) {\n      Taro.showToast({\n        title: \"请先完成前置闯关\",\n        icon: \"error\"\n      });\n    } else if (key < keyFromStore) {\n      Taro.showToast({\n        title: \"已经闯关成功，继续加油\",\n        icon: \"success\"\n      });\n    } else {\n      console.log(\"数组下标溢出\");\n    }\n  };\n  var getIconSerialStyle = function getIconSerialStyle(key) {\n    //当selectKey=3时候，红色：key=1，key=2，key=3，key=4\n    //当selectKey=1时候，红色：key=1,key=2\n    if (key <= selectKey) {\n      return {\n        backgroundColor: '#de1f1a',\n        color: \"white\"\n      };\n    }\n    return {};\n  };\n  return /*#__PURE__*/_jsxs(View, {\n    className: \"indexPage\",\n    children: [/*#__PURE__*/_jsx(View, {\n      className: \"at-article__h1 title\",\n      children: \"\\u5C55\\u9986\\u95EF\\u5173\"\n    }), /*#__PURE__*/_jsx(View, {\n      className: \"at-article__h2 subTitle\",\n      children: \"\\u70B9\\u51FB\\u5C55\\u9986\\u5373\\u53EF\\u53C2\\u4E0E\\u5C55\\u9986\\u7B54\\u9898\"\n    }), /*#__PURE__*/_jsxs(View, {\n      className: \"knowView\",\n      children: [/*#__PURE__*/_jsx(View, {\n        className: \"knowTitle\",\n        children: \"\\u2014\\u2014\\u2014\\u2014 \\u9009\\u62E9\\u5173\\u53E3\\u95EF\\u5173 \\u2014\\u2014\\u2014\\u2014\"\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"knowInfo\",\n        children: [/*#__PURE__*/_jsxs(View, {\n          className: \"infoTotal\",\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"infoNumber\",\n            children: maxKnowListLength\n          }), /*#__PURE__*/_jsx(View, {\n            className: \"infoText\",\n            children: \"\\u5173\\u53E3\\u603B\\u6570\"\n          })]\n        }), /*#__PURE__*/_jsxs(View, {\n          className: \"infoTotal\",\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"infoNumber\",\n            children: selectKey\n          }), /*#__PURE__*/_jsx(View, {\n            className: \"infoText\",\n            children: \"\\u6210\\u529F\\u901A\\u5173\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"at-row at-row--wrap iconView\",\n        children: exhibitionKnowData.map(function (item, index) {\n          return /*#__PURE__*/_jsxs(View, {\n            className: \"at-col at-col-4 iconItem\",\n            onClick: function onClick() {\n              return handleClick(index);\n            },\n            children: [/*#__PURE__*/_jsx(Image, {\n              className: \"iconImage\",\n              src: index < selectKey ? onSelectHuiZhang : huiZhang\n            }), /*#__PURE__*/_jsx(View, {\n              className: \"iconTitle\",\n              children: item.knowTitle\n            }), /*#__PURE__*/_jsxs(View, {\n              className: \"iconSerial\",\n              style: getIconSerialStyle(index),\n              children: [\"\\u7B2C\", item.id, \"\\u5173\"]\n            })]\n          }, index);\n        })\n      })]\n    }), /*#__PURE__*/_jsx(GlobalFooter, {}), /*#__PURE__*/_jsx(GlobalMenu, {})]\n  });\n});","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/know/index!./index.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/know/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}