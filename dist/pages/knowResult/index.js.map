{"version":3,"file":"pages/knowResult/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://mbti-test-mini/./src/pages/knowResult/index.tsx?c33f","webpack://mbti-test-mini/._src_pages_knowResult_index.tsx"],"sourcesContent":["import _slicedToArray from \"E:/dianlianghongtu/dianlianghongtu/hongtu-test-mini/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { View } from \"@tarojs/components\";\nimport { AtButton } from \"taro-ui\";\nimport Taro from \"@tarojs/taro\";\nimport { useEffect, useState } from \"react\";\nimport GlobalFooter from \"../../components/GlobalFooter\";\nimport exhibitionKnowDara from \"../../data/exhibition_know_data.json\";\nimport questions from \"../../data/knowQuestions.json\";\nimport { getBestQuestionResult } from \"../../utils/functionUtils\";\nimport \"./index.scss\";\n\n/**\n * 展馆闯关结果页面\n */\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default (function () {\n  var maxKnowListLength = exhibitionKnowDara.length;\n\n  //第一步：获取doKnow页面传递过来的selectKey\n  //const [selectKey, setSelectKey] = useState<number>(1);\n  var keyFromStore = Taro.getStorageSync(\"selectKey\");\n  // 第一步：从doKnow页面获取答案\n  var answerList = Taro.getStorageSync(\"answerList\");\n  if (!answerList || answerList.length < 1) {\n    Taro.showToast({\n      title: \"答案为空\",\n      icon: \"error\",\n      duration: 3000\n    });\n  }\n  //第二步：需要先改得分方法 第三步：当passValue=knowResultScore>=60 ? \"闯关成功\" || \"闯关失败\"\n\n  // 第二步：获取测试结果\n  var knowResultScore = getBestQuestionResult(answerList, questions);\n  var _useState = useState(\"闯关失败\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    passValue = _useState2[0],\n    setPassValue = _useState2[1];\n  var _useState3 = useState(\"#e69a48\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    storeColor = _useState4[0],\n    setStoreColor = _useState4[1];\n  var _useState5 = useState(\"#e69a48\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    valueColor = _useState6[0],\n    setValueColor = _useState6[1];\n\n  // 第三步：\n  //页面加载前\n  useEffect(function () {\n    //根据测试结果返回不同的结论\n    if (knowResultScore >= 60) {\n      setPassValue(\"闯关成功\");\n    } else {\n      setPassValue(\"闯关失败\");\n      setStoreColor(\"#8a0b0a\");\n      setValueColor(\"#8a0b0a\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsxs(View, {\n    className: \"knowResultPage\",\n    children: [/*#__PURE__*/_jsxs(View, {\n      className: \"at-row\",\n      children: [/*#__PURE__*/_jsx(View, {\n        className: \"at-col at-article__h1 title\",\n        children: /*#__PURE__*/_jsx(AtButton, {\n          className: \"enterBtn\",\n          onClick: function onClick() {\n            Taro.setStorageSync(\"selectKey\", knowResultScore >= 60 ? keyFromStore + 1 : keyFromStore);\n            Taro.reLaunch({\n              url: \"/pages/know/index\"\n            });\n            // Taro.showToast({\n            //   title: `${keyFromStore}`,\n            //   icon: \"error\",\n            //   duration: 2000,\n            // });\n          },\n          children: \"\\u8FD4\\u56DE\"\n        })\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"at-col at-article__h1 title\",\n        children: \"\\u7B54\\u9898\\u89E3\\u6790\"\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"at-col at-article__h1 title\",\n        children: knowResultScore >= 60 && keyFromStore < maxKnowListLength - 1 ? /*#__PURE__*/_jsx(AtButton, {\n          className: \"enterBtn\",\n          onClick: function onClick() {\n            Taro.setStorageSync(\"selectKey\", keyFromStore + 1);\n            Taro.reLaunch({\n              url: \"/pages/doKnow/index\"\n            });\n          },\n          children: \"\\u4E0B\\u4E00\\u5173\"\n        }) : /*#__PURE__*/_jsx(View, {})\n      })]\n    }), /*#__PURE__*/_jsx(View, {\n      style: {\n        color: storeColor\n      },\n      className: \"at-article__h2 subTitle\",\n      children: knowResultScore\n    }), /*#__PURE__*/_jsx(View, {\n      style: {\n        color: valueColor\n      },\n      className: \"at-article__h2 subTitle\",\n      children: passValue\n    }), /*#__PURE__*/_jsx(View, {\n      className: \"answerDetailView\",\n      children: questions.map(function (question, index) {\n        var userAnswer = answerList[index];\n        var correctOption = question.options.find(function (opt) {\n          return opt.score > 0;\n        });\n        return /*#__PURE__*/_jsxs(View, {\n          className: \"questionItemView\",\n          children: [/*#__PURE__*/_jsxs(View, {\n            className: \"questionTitle\",\n            children: [index + 1, \".\", question.title]\n          }), question.options.map(function (option) {\n            var backgroundColor = \"\";\n            var color = \"\";\n            if (option.key === userAnswer) {\n              backgroundColor = option.score > 0 ? \"#bfd9d0\" : \"#dbbfbc\";\n              color = option.score > 0 ? \"#317a61\" : \"#8a0b0a\";\n            } else if (option.key === (correctOption === null || correctOption === void 0 ? void 0 : correctOption.key)) {\n              backgroundColor = \"#bfd9d0\";\n              color = \"#317a61\";\n            }\n            return /*#__PURE__*/_jsx(View, {\n              style: {\n                backgroundColor: backgroundColor,\n                color: color\n              },\n              className: \"questionSelects\",\n              children: /*#__PURE__*/_jsxs(View, {\n                className: \"questionSelectItem\",\n                children: [option.key, \"\\uFF1A\", option.value]\n              })\n            }, option.key);\n          })]\n        }, index);\n      })\n    }), /*#__PURE__*/_jsx(GlobalFooter, {})]\n  });\n});","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/knowResult/index!./index.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/knowResult/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}